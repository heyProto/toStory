!function(e){function t(s){if(a[s])return a[s].exports;var l=a[s]={exports:{},id:s,loaded:!1};return e[s].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){a(1),e.exports=a(13)},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var l=a(2),i=s(l),o=a(3),n=a(4),r=s(n);window.ProtoGraph=window.ProtoGraph||{},window.ProtoGraph.Card=window.ProtoGraph.Card||{},ProtoGraph.Card.toStory=function(){this.cardType="toStoryCard"},ProtoGraph.Card.toStory.prototype.init=function(e){this.options=e},ProtoGraph.Card.toStory.prototype.getData=function(e){return this.containerInstance.exportData()},ProtoGraph.Card.toStory.prototype.renderSixteenCol=function(e){this.mode="col16",this.render()},ProtoGraph.Card.toStory.prototype.renderSevenCol=function(e){this.mode="col7",this.render()},ProtoGraph.Card.toStory.prototype.renderFourCol=function(e){this.mode="col4",this.render()},ProtoGraph.Card.toStory.prototype.renderThreeCol=function(e){this.mode="col3",this.render()},ProtoGraph.Card.toStory.prototype.renderTwoCol=function(e){this.mode="col2",this.render()},ProtoGraph.Card.toStory.prototype.render=function(){var e=this;this.options.isFromSSR?(0,o.hydrate)(i.default.createElement(r.default,{mode:this.mode,dataJSON:this.options.initialState.dataJSON}),this.options.selector):(0,o.render)(i.default.createElement(r.default,{dataURL:this.options.data_url,selector:this.options.selector,domain:this.options.domain,siteConfigURL:this.options.site_config_url,siteConfigs:this.options.site_configs,clickCallback:this.options.onClickCallback,mode:this.mode,ref:function(t){e.containerInstance=e.containerInstance||t}}),this.options.selector)}},function(e,t){e.exports=React},function(e,t){e.exports=ReactDOM},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),r=a(2),d=s(r),c=a(5),u=a(6),h=s(u),m=a(7),f=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),s={fetchingData:!0,dataJSON:{},domain:void 0,optionalConfigJSON:{}};return a.props.dataJSON&&(s.fetchingData=!1,s.dataJSON=a.props.dataJSON,s.languageTexts=a.getLanguageTexts(a.props.dataJSON.data.language)),a.props.optionalConfigJSON&&(s.optionalConfigJSON=a.props.optionalConfigJSON),a.props.domain&&(s.domain=a.props.domain),a.props.siteConfigs&&(s.siteConfigs=a.props.siteConfigs),a.state=s,console.log("constructor: State: ",a.state.fetchingData),a}return o(t,e),n(t,[{key:"componentDidMount",value:function(){var e=this;if(this.state.fetchingData){var t=[(0,c.get)(this.props.dataURL)];this.props.siteConfigURL&&t.push((0,c.get)(this.props.siteConfigURL)),(0,c.all)(t).then((0,c.spread)(function(t,a){var s={fetchingData:!1,dataJSON:t.data,optionalConfigJSON:{}};a?s.siteConfigs=a.data:s.siteConfigs=e.state.siteConfigs,s.optionalConfigJSON.house_colour=s.siteConfigs.house_colour,s.optionalConfigJSON.reverse_house_colour=s.siteConfigs.reverse_house_colour,s.optionalConfigJSON.font_colour=s.siteConfigs.font_colour,s.optionalConfigJSON.reverse_font_colour=s.siteConfigs.reverse_font_colour,s.optionalConfigJSON.story_card_style=s.siteConfigs.story_card_style,s.optionalConfigJSON.story_card_flip=s.siteConfigs.story_card_flip,s.languageTexts=e.getLanguageTexts(s.siteConfigs.primary_language.toLowerCase()),e.setState(s)}))}else console.log("ISFromSSR",!this.props.isFromSSR),this.props.renderingSSR||this.componentDidUpdate()}},{key:"componentWillReceiveProps",value:function(e){e.dataJSON&&this.setState({dataJSON:e.dataJSON})}},{key:"componentDidUpdate",value:function(){if("col2"===this.props.mode&&this.ellipsizeTextBox(),this.state.optionalConfigJSON.story_card_flip&&this.state.dataJSON.data.summary){var e=document.querySelector(".protograph-summary-text");this.multiLineTruncate(e)}}},{key:"multiLineTruncate",value:function(e){var t=this.state.dataJSON.data,a=t.summary.split(" ");this.props;if(e)for(;e.scrollHeight>e.offsetHeight;)a.pop(),e.innerHTML=a.join(" ")+'...<br><a id="read-more-button" href="#" class="protograph-read-more">Read more</a>'}},{key:"exportData",value:function(){return this.props.selector.getBoundingClientRect()}},{key:"checkURL",value:function(e){var t=/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/;return!!t.test(e)}},{key:"calculateDateTime",value:function(){var e=this.state.dataJSON.data,t=void 0,a=void 0,s=void 0,l=void 0,i=void 0;t=e.data.date.split("T")[0],a=t.split("-"),s=new Date(t),l=s.toLocaleString("en-us",{month:"short"}),i=e.data.date.split("T")[1];var o=i.split(":"),n=void 0;return n=o[0]<"12"?"am":"pm",{month:l,am_pm:n,date:a,time:i}}},{key:"ellipsizeTextBox",value:function(){var e=document.querySelector(".article-title"),t=document.querySelector(".article-title"),a=void 0,s=this.state.dataJSON.data.headline;if(""===s||void 0===s)t.innerHTML="";else for(t.innerHTML=this.state.dataJSON.data.headline,a=this.state.dataJSON.data.headline.split(" ");e.offsetHeight>80;)a.pop(),t.innerHTML=a.join(" ")+"..."}},{key:"handleClick",value:function(){window.open(this.state.dataJSON.data.url,"_top")}},{key:"matchDomain",value:function(e,t){var a=this.getDomainFromURL(t).replace(/^(https?:\/\/)?(www\.)?/,""),s=this.subDomain(e),l=this.subDomain(a);return s?e===a||e.indexOf(a)>=0:l?e===a||a.indexOf(e)>=0:e===a}},{key:"getDomainFromURL",value:function(e){var t=(0,m.parse)(e);return t.hostname}},{key:"subDomain",value:function e(t){t||(t=""),t=t.replace(new RegExp(/^\s+/),""),t=t.replace(new RegExp(/\s+$/),""),t=t.replace(new RegExp(/\\/g),"/"),t=t.replace(new RegExp(/^http\:\/\/|^https\:\/\/|^ftp\:\/\//i),""),t=t.replace(new RegExp(/^www\./i),""),t=t.replace(new RegExp(/\/(.*)/),""),t.match(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i))?t=t.replace(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i),""):t.match(new RegExp(/\.[a-z]{2,4}$/i))&&(t=t.replace(new RegExp(/\.[a-z]{2,4}$/i),""));var e=!!t.match(new RegExp(/\./g));return e}},{key:"renderSixteenCol",value:function(){var e=this;if(console.log("Fetching Data: ",this.state.fetchingData),this.state.fetchingData)return d.default.createElement("div",null,"Loading");var t="rgba(51, 51, 51, 0.75)",a="#fff";this.state.dataJSON.data.interactive&&(t=this.state.optionalConfigJSON.house_colour,a=this.state.optionalConfigJSON.font_colour),this.state.dataJSON.data.sponsored&&(t=this.state.optionalConfigJSON.reverse_house_colour,a=this.state.optionalConfigJSON.reverse_font_colour);var s=this.state.dataJSON.data.faviconurl,l=this.state.dataJSON.data.url,i=this.state.dataJSON.data.left||50,o=this.state.dataJSON.data.top||50,n=void 0,r=void 0,c=l&&l.split("/");c&&c[2];this.matchDomain(this.state.domain,l)&&(s=void 0);var u=this.state.dataJSON.data.byline,m=this.state.dataJSON.data.publishedat,f=this.state.dataJSON.data.focus,p="";u&&(p=p+"By "+u),u&&m&&NaN!=m&&(p+=" . "),m&&NaN!=m&&(p+=h.default.ago(m));var g=this.state.dataJSON.data.imageurl;this.checkURL(g)||(g=void 0);var v=window.vertical_name||this.state.dataJSON.data.series,N=this.state.dataJSON.data.genre,y="1px 1px 1px 5px";!N&&v&&(y="2.5px 5px"),v||N||(y="0px"),N&&!v&&(y="1px");var b="h"===f?{width:1260}:{width:680};if(g)switch(this.state.optionalConfigJSON.story_card_style){case"Clear: Black & White":b="h"===f?{width:1260,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"}:{width:680,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"};break;case"Blur: Color":b="h"===f?{width:1260,WebkitFilter:"blur(5px)",filter:"blur(5px);"}:{width:680,WebkitFilter:"blur(5px)",filter:"blur(5px);"}}return"h"===f?(b.left=i+"%",b.top=o+"%",n=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,r=100-o>=0&&100-o<=100?100-o:100-o<0?0:100,b.transform="translate(-"+n+"%,-"+r+"%)",d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-16-story-card"},d.default.createElement("div",{className:"padding20"},g?d.default.createElement("img",{className:"image-styling",style:b,src:g}):null,g?d.default.createElement("div",{className:"title-background"}):null,g?d.default.createElement("div",{className:"col-16-diag-grad"}):null,d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre)),d.default.createElement("div",{className:"article-title"},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line"},!this.state.dataJSON.data.hide_byline&&p)))))):d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-16-story-card"},d.default.createElement("div",{className:"col-16-block-left bottom-pull-div"},d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre)),d.default.createElement("div",{className:"article-title"},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line"},!this.state.dataJSON.data.hide_byline&&p)),d.default.createElement("div",{className:"col-16-block-right"},g?d.default.createElement("img",{className:"image-styling-v",style:b,src:g}):null,g?d.default.createElement("div",{className:"title-background"}):null,g?d.default.createElement("div",{className:"col-16-diag-grad"}):null)))}},{key:"renderSevenCol",value:function(){var e=this;if(this.state.fetchingData)return d.default.createElement("div",null,"Loading");var t="rgba(51, 51, 51, 0.75)",a="#fff";this.state.dataJSON.data.interactive&&(t=this.state.optionalConfigJSON.house_colour,a=this.state.optionalConfigJSON.font_colour),this.state.dataJSON.data.sponsored&&(t=this.state.optionalConfigJSON.reverse_house_colour,a=this.state.optionalConfigJSON.reverse_font_colour);var s=this.state.dataJSON.data.faviconurl,l=this.state.dataJSON.data.url,i=this.state.dataJSON.data.left||50,o=this.state.dataJSON.data.top||50,n=void 0,r=void 0;this.matchDomain(this.state.domain,l)&&(s=void 0);var c=this.state.dataJSON.data.col7imageurl;this.state.dataJSON.data.col7imageurl||(c=this.state.dataJSON.data.imageurl),this.checkURL(c)||(c=void 0);var u=this.state.dataJSON.data.byline,m=this.state.dataJSON.data.publishedat,f=this.state.dataJSON.data.focus,p="";u&&(p=p+"By "+u),u&&m&&NaN!=m&&(p+=" . "),m&&NaN!=m&&(p+=h.default.ago(m));var g=window.vertical_name||this.state.dataJSON.data.series,v=this.state.dataJSON.data.genre,N="1px 1px 1px 5px";!v&&g&&(N="2.5px 5px"),g||v||(N="0px"),v&&!g&&(N="1px");var y="h"===f?{width:540}:{width:"100%",height:250};if(c)switch(this.state.optionalConfigJSON.story_card_style){case"Clear: Black & White":y="h"===f?{width:540,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"}:{width:"100%",WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);",height:250};break;case"Blur: Color":y="h"===f?{width:540,WebkitFilter:"blur(5px)",filter:"blur(5px);"}:{width:"100%",WebkitFilter:"blur(5px)",filter:"blur(5px);",height:250}}var b=void 0;return c&&(b={width:240}),this.state.optionalConfigJSON.story_card_flip&&this.state.dataJSON.data.summary?"h"===f?(y.left=i+"%",y.top=o+"%",n=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,r=100-o>=0&&100-o<=100?100-o:100-o<0?0:100,y.transform="translate(-"+n+"%,-"+r+"%)",d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-7-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"padding12"},c?d.default.createElement("img",{className:"image-styling",style:y,src:c}):d.default.createElement("div",{className:"image-styling",style:{backgroundColor:"#fafafa",height:250,width:540}}),c?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},g,v?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:g?"3px":"0px"}},v," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:c?"white":"black"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:c?"white":"black"}},!this.state.dataJSON.data.hide_byline&&p)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.data.summary)))))))):d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-7-story-card",style:{backgroundColor:"#fafafa"}},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"card-tags",style:{position:"absolute",top:"0px",padding:"12px"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},g,v?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:g?"3px":"0px"}},v," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre)),d.default.createElement("div",{className:"col-7-block-left bottom-pull-div",style:b},d.default.createElement("div",{className:"article-title",style:{color:"black"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.data.hide_byline&&p)),d.default.createElement("div",{className:"col-7-block-right"},d.default.createElement("img",{style:y,src:c}),c?d.default.createElement("div",{className:"title-background"}):null)),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.data.summary))))))):"h"===f?(y.left=i+"%",y.top=o+"%",n=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,r=100-o>=0&&100-o<=100?100-o:100-o<0?0:100,y.transform="translate(-"+n+"%,-"+r+"%)",d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-7-story-card"},d.default.createElement("div",{className:"padding12"},c?d.default.createElement("img",{className:"image-styling",style:y,src:c}):d.default.createElement("div",{className:"image-styling",style:{backgroundColor:"#fafafa",height:250,width:540}}),c?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},g,v?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:g?"3px":"0px"}},v," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:c?"white":"black"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:c?"white":"black"}},!this.state.dataJSON.data.hide_byline&&p)))))):d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-7-story-card",style:{backgroundColor:"#fafafa"}},d.default.createElement("div",{className:"card-tags",style:{position:"absolute",top:"0px",padding:"12px"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},g,v?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:g?"3px":"0px"}},v," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre)),d.default.createElement("div",{className:"col-7-block-left bottom-pull-div",style:b},d.default.createElement("div",{className:"article-title",style:{color:"black"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.data.hide_byline&&p)),d.default.createElement("div",{className:"col-7-block-right"},d.default.createElement("img",{style:y,src:c}),c?d.default.createElement("div",{className:"title-background"}):null)))}},{key:"renderFourCol",value:function(){var e=this;if(this.state.fetchingData)return d.default.createElement("div",null,"Loading");var t="rgba(51, 51, 51, 0.75)",a="#fff";this.state.dataJSON.data.interactive&&(t=this.state.optionalConfigJSON.house_colour,a=this.state.optionalConfigJSON.font_colour),this.state.dataJSON.data.sponsored&&(t=this.state.optionalConfigJSON.reverse_house_colour,a=this.state.optionalConfigJSON.reverse_font_colour);var s=this.state.dataJSON.data.faviconurl,l=this.state.dataJSON.data.url,i=this.state.dataJSON.data.left||50,o=this.state.dataJSON.data.top||50,n=void 0,r=void 0,c=l&&l.split("/");c&&c[2];this.matchDomain(this.state.domain,l)&&(s=void 0);var u=this.state.dataJSON.data.col7imageurl;this.state.dataJSON.data.col7imageurl||(u=this.state.dataJSON.data.imageurl),this.checkURL(u)||(u=void 0);var m=this.state.dataJSON.data.byline,f=this.state.dataJSON.data.publishedat,p=this.state.dataJSON.data.focus,g="";m&&(g=g+"By "+m),m&&f&&NaN!=f&&(g+=" . "),f&&NaN!=f&&(g+=h.default.ago(f));var v=window.vertical_name||this.state.dataJSON.data.series,N=this.state.dataJSON.data.genre,y="1px 1px 1px 5px";!N&&v&&(y="2.5px 5px"),v||N||(y="0px"),N&&!v&&(y="1px");var b="h"===p?{height:250}:{height:150};if(u)switch(this.state.optionalConfigJSON.story_card_style){case"Clear: Black & White":b="h"===p?{height:250,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"}:{height:150,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"};break;case"Blur: Color":b="h"===p?{height:250,WebkitFilter:"blur(5px)",filter:"blur(5px);"}:{height:150,WebkitFilter:"blur(5px)",filter:"blur(5px);"}}return this.state.optionalConfigJSON.story_card_flip&&this.state.dataJSON.data.summary?"h"===p?(b.left=i+"%",b.top=o+"%",n=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,r=100-o>=0&&100-o<=100?100-o:100-o<0?0:100,b.transform="translate(-"+n+"%,-"+r+"%)",d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-4-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"padding12"},u?d.default.createElement("img",{className:"image-styling",style:b,src:u}):d.default.createElement("div",{className:"image-styling",style:{backgroundColor:"#fafafa",height:250,width:300}}),u?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:u?"white":"black"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:u?"white":"black"}},!this.state.dataJSON.data.hide_byline&&g)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.data.summary)))))))):d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-4-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"col-4-block-top"},d.default.createElement("img",{className:"image-centering",style:b,src:u}),d.default.createElement("div",{className:"card-tags padding12",style:{top:0,position:"absolute"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre))),d.default.createElement("div",{className:"col-4-block-bottom"},d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:"black",maxHeight:25,overflow:"hidden"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.data.hide_byline&&g)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.data.summary))))))):"h"===p?(b.left=i+"%",b.top=o+"%",n=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,r=100-o>=0&&100-o<=100?100-o:100-o<0?0:100,b.transform="translate(-"+n+"%,-"+r+"%)",d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-4-story-card"},d.default.createElement("div",{className:"padding12"},u?d.default.createElement("img",{className:"image-styling",style:b,src:u}):d.default.createElement("div",{className:"image-styling",style:{backgroundColor:"#fafafa",height:250,width:300}}),u?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:u?"white":"black"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:u?"white":"black"}},!this.state.dataJSON.data.hide_byline&&g)))))):d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-4-story-card"},d.default.createElement("div",{className:"col-4-block-top"},d.default.createElement("img",{className:"image-centering",style:b,src:u}),d.default.createElement("div",{className:"card-tags padding12",style:{top:0,position:"absolute"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre))),d.default.createElement("div",{className:"col-4-block-bottom"},d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:"black",maxHeight:25,overflow:"hidden"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.data.hide_byline&&g)))))}},{key:"renderThreeCol",value:function(){var e=this;if(this.state.fetchingData)return d.default.createElement("div",null,"Loading");var t="rgba(51, 51, 51, 0.75)",a="#fff";this.state.dataJSON.data.interactive&&(t=this.state.optionalConfigJSON.house_colour,a=this.state.optionalConfigJSON.font_colour),this.state.dataJSON.data.sponsored&&(t=this.state.optionalConfigJSON.reverse_house_colour,a=this.state.optionalConfigJSON.reverse_font_colour);var s=this.state.dataJSON.data.faviconurl,l=this.state.dataJSON.data.url,i=this.state.dataJSON.data.left||50,o=this.state.dataJSON.data.top||50,n=void 0,r=void 0,c=l&&l.split("/");c&&c[2];this.matchDomain(this.state.domain,l)&&(s=void 0);var u=this.state.dataJSON.data.col7imageurl;this.state.dataJSON.data.col7imageurl||(u=this.state.dataJSON.data.imageurl),this.checkURL(u)||(u=void 0);var m=this.state.dataJSON.data.byline,f=this.state.dataJSON.data.publishedat,p=this.state.dataJSON.data.focus,g="";m&&(g=g+"By "+m),m&&f&&NaN!=f&&(g+=" . "),f&&NaN!=f&&(g+=h.default.ago(f));var v=window.vertical_name||this.state.dataJSON.data.series,N=this.state.dataJSON.data.genre,y="1px 1px 1px 5px";!N&&v&&(y="2.5px 5px"),v||N||(y="0px"),N&&!v&&(y="1px");var b="h"===p?{height:250}:{height:132};if(u)switch(this.state.optionalConfigJSON.story_card_style){case"Clear: Black & White":b="h"===p?{height:250,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"}:{height:132,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"};break;case"Blur: Color":b="h"===p?{height:250,WebkitFilter:"blur(5px)",filter:"blur(5px);"}:{height:132,WebkitFilter:"blur(5px)",filter:"blur(5px);"}}return this.state.optionalConfigJSON.story_card_flip&&this.state.dataJSON.data.summary?"h"===p?(b.left=i+"%",b.top=o+"%",n=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,r=100-o>=0&&100-o<=100?100-o:100-o<0?0:100,b.transform="translate(-"+n+"%,-"+r+"%)",d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-3-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"padding12"},u?d.default.createElement("img",{className:"image-styling",style:b,src:u}):d.default.createElement("div",{className:"image-styling",style:{backgroundColor:"#fafafa",height:250,width:300}}),u?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{
className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:u?"white":"black"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:u?"white":"black"}},!this.state.dataJSON.data.hide_byline&&g)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.data.summary)))))))):d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-3-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"col-3-block-top"},d.default.createElement("img",{className:"image-centering",style:b,src:u}),d.default.createElement("div",{className:"card-tags padding12",style:{top:0,position:"absolute"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre))),d.default.createElement("div",{className:"col-3-block-bottom"},d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:"black",maxHeight:55}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.data.hide_byline&&g)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.data.summary))))))):"h"===p?(b.left=i+"%",b.top=o+"%",n=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,r=100-o>=0&&100-o<=100?100-o:100-o<0?0:100,b.transform="translate(-"+n+"%,-"+r+"%)",d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-3-story-card"},d.default.createElement("div",{className:"padding12"},u?d.default.createElement("img",{className:"image-styling",style:b,src:u}):d.default.createElement("div",{className:"image-styling",style:{backgroundColor:"#fafafa",height:250,width:220}}),u?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:u?"white":"black"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:u?"white":"black"}},!this.state.dataJSON.data.hide_byline&&g)))))):d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-3-story-card"},d.default.createElement("div",{className:"col-3-block-top"},d.default.createElement("img",{className:"image-centering",style:b,src:u}),d.default.createElement("div",{className:"card-tags padding12",style:{top:0,position:"absolute"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.data.sponsored?"underline":"none"}},this.state.dataJSON.data.sponsored?"Sponsored":this.state.dataJSON.data.subgenre))),d.default.createElement("div",{className:"col-3-block-bottom"},d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:"black",maxHeight:55}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.data.hide_byline&&g)))))}},{key:"renderTwoCol",value:function(){var e=this;if(this.state.fetchingData)return d.default.createElement("div",null,"Loading");var t="rgba(51, 51, 51, 0.75)",a="#fff";this.state.dataJSON.data.interactive&&(t=this.state.optionalConfigJSON.house_colour,a=this.state.optionalConfigJSON.font_colour),this.state.dataJSON.data.sponsored&&(t=this.state.optionalConfigJSON.reverse_house_colour,a=this.state.optionalConfigJSON.reverse_font_colour);var s=this.state.dataJSON.data.faviconurl,l=this.state.dataJSON.data.url,i=this.state.dataJSON.data.left||50,o=this.state.dataJSON.data.top||50,n=void 0,r=void 0,c=l&&l.split("/");c&&c[2];this.matchDomain(this.state.domain,l)&&(s=void 0);var u=this.state.dataJSON.data.col7imageurl;this.state.dataJSON.data.col7imageurl||(u=this.state.dataJSON.data.imageurl),this.checkURL(u)||(u=void 0);var m=this.state.dataJSON.data.byline,f=this.state.dataJSON.data.publishedat,p=this.state.dataJSON.data.focus,g="";m&&(g=g+"By "+m),m&&f&&NaN!=f&&(g+=" . "),f&&NaN!=f&&(g+=h.default.ago(f));var v=(window.vertical_name||this.state.dataJSON.data.series,this.state.dataJSON.data.genre),N=v?"1px":"0px",y="h"===p?{height:250}:{height:84};if(u)switch(this.state.optionalConfigJSON.story_card_style){case"Clear: Black & White":y="h"===p?{height:250,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"}:{height:84,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"};break;case"Blur: Color":y="h"===p?{height:250,WebkitFilter:"blur(5px)",filter:"blur(5px);"}:{height:84,WebkitFilter:"blur(5px)",filter:"blur(5px);"}}return this.state.optionalConfigJSON.story_card_flip&&this.state.dataJSON.data.summary?"h"===p?(y.left=i+"%",y.top=o+"%",n=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,r=100-o>=0&&100-o<=100?100-o:100-o<0?0:100,y.transform="translate(-"+n+"%,-"+r+"%)",d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-2-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"padding12"},u?d.default.createElement("img",{className:"image-styling",style:y,src:u}):d.default.createElement("div",{className:"image-styling",style:{zIndex:"-1",backgroundColor:"#fafafa",height:250,width:140}}),u?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white",marginRight:"4px"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},this.state.dataJSON.data.genre?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a}},this.state.dataJSON.data.genre," "):null)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:u?"white":"black"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:u?"white":"black"}},!this.state.dataJSON.data.hide_byline&&g)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.data.summary)))))))):d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-2-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"col-2-block-top"},d.default.createElement("img",{className:"image-centering",style:y,src:u}),d.default.createElement("div",{className:"card-tags padding12",style:{top:0,position:"absolute"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white",marginRight:"4px"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},this.state.dataJSON.data.genre?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a}},this.state.dataJSON.data.genre," "):null))),d.default.createElement("div",{className:"col-2-block-bottom"},d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:"black"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.data.hide_byline&&g)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.data.summary))))))):"h"===p?(y.left=i+"%",y.top=o+"%",n=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,r=100-o>=0&&100-o<=100?100-o:100-o<0?0:100,y.transform="translate(-"+n+"%,-"+r+"%)",d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-2-story-card"},d.default.createElement("div",{className:"padding12"},u?d.default.createElement("img",{className:"image-styling",style:y,src:u}):d.default.createElement("div",{className:"image-styling",style:{zIndex:"-1",backgroundColor:"#fafafa",height:250,width:140}}),u?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white",marginRight:"4px"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},this.state.dataJSON.data.genre?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a}},this.state.dataJSON.data.genre," "):null)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:u?"white":"black"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:u?"white":"black"}},!this.state.dataJSON.data.hide_byline&&g)))))):d.default.createElement("div",{onClick:function(){e.handleClick()}},d.default.createElement("div",{className:"col-2-story-card"},d.default.createElement("div",{className:"col-2-block-top"},d.default.createElement("img",{className:"image-centering",style:y,src:u}),d.default.createElement("div",{className:"card-tags padding12",style:{top:0,position:"absolute"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.data.iconbgcolor||"white",marginRight:"4px"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},this.state.dataJSON.data.genre?d.default.createElement("div",{className:"genre",style:{backgroundColor:t,color:a}},this.state.dataJSON.data.genre," "):null))),d.default.createElement("div",{className:"col-2-block-bottom"},d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:"black"}},this.state.dataJSON.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.data.hide_byline&&g)))))}},{key:"getLanguageTexts",value:function(e){var t=e?e:"hindi",a=void 0;switch(t.toLowerCase()){case"hindi":a={font:"'Sarala', sans-serif"};break;default:a={font:void 0}}return a}},{key:"render",value:function(){switch(console.log("THIS WAS EXECUTED",this.props.mode),this.props.mode){case"col16":return this.renderSixteenCol();case"col7":return this.renderSevenCol();case"col4":return this.renderFourCol();case"col3":return this.renderThreeCol();case"col2":return this.renderTwoCol()}}}]),t}(d.default.Component);t.default=f},function(e,t){e.exports=axios},function(module,exports){"use strict";var timeago=function(){var o={second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},obj={};return obj.ago=function(e,t){var a,s=Math.round,l=" ago",i=function(e,a){return void 0===t?a+" "+e+(a>1?"s":"")+l:a+e.substring(0,1)},n=Date.now()-new Date(e).getTime();n<0&&(n*=-1,l=" from now");for(var r in o){if(s(n)<o[r])return i(a||"m",s(n/(o[a]||1)));a=r}return i(r,s(n/o[r]))},obj.today=function(){var e=new Date,t=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"),a=new Array("January","February","March","April","May","June","July","August","September","October","November","December");return t[e.getDay()]+", "+a[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()},obj.timefriendly=function(s){var t=s.match(/(\d).([a-z]*?)s?$/);return t[1]*eval(o[t[2]])},obj.mintoread=function(e,t,a){var s=Math.round(e.split(" ").length/(a||200));return(s||"< 1")+(t||" min to read")},obj};"undefined"!=typeof module&&module.exports&&(module.exports=timeago())},function(e,t,a){function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function l(e,t,a){if(e&&d(e)&&e instanceof s)return e;var l=new s;return l.parse(e,t,a),l}function i(e){return r(e)&&(e=l(e)),e instanceof s?e.format():s.prototype.format.call(e)}function o(e,t){return l(e,!1,!0).resolve(t)}function n(e,t){return e?l(e,!1,!0).resolveObject(t):t}function r(e){return"string"==typeof e}function d(e){return"object"==typeof e&&null!==e}function c(e){return null===e}function u(e){return null==e}var h=a(8);t.parse=l,t.resolve=o,t.resolveObject=n,t.format=i,t.Url=s;var m=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,p=["<",">",'"',"`"," ","\r","\n","\t"],g=["{","}","|","\\","^","`"].concat(p),v=["'"].concat(g),N=["%","/","?",";","#"].concat(v),y=["/","?","#"],b=255,S=/^[a-z0-9A-Z_-]{0,63}$/,E=/^([a-z0-9A-Z_-]{0,63})(.*)$/,O={javascript:!0,"javascript:":!0},J={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=a(10);s.prototype.parse=function(e,t,a){if(!r(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e;s=s.trim();var l=m.exec(s);if(l){l=l[0];var i=l.toLowerCase();this.protocol=i,s=s.substr(l.length)}if(a||l||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var o="//"===s.substr(0,2);!o||l&&J[l]||(s=s.substr(2),this.slashes=!0)}if(!J[l]&&(o||l&&!C[l])){for(var n=-1,d=0;d<y.length;d++){var c=s.indexOf(y[d]);c!==-1&&(n===-1||c<n)&&(n=c)}var u,f;f=n===-1?s.lastIndexOf("@"):s.lastIndexOf("@",n),f!==-1&&(u=s.slice(0,f),s=s.slice(f+1),this.auth=decodeURIComponent(u)),n=-1;for(var d=0;d<N.length;d++){var c=s.indexOf(N[d]);c!==-1&&(n===-1||c<n)&&(n=c)}n===-1&&(n=s.length),this.host=s.slice(0,n),s=s.slice(n),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var g=this.hostname.split(/\./),d=0,x=g.length;d<x;d++){var w=g[d];if(w&&!w.match(S)){for(var _="",L=0,D=w.length;L<D;L++)_+=w.charCodeAt(L)>127?"x":w[L];if(!_.match(S)){var R=g.slice(0,d),j=g.slice(d+1),F=w.match(E);F&&(R.push(F[1]),j.unshift(F[2])),j.length&&(s="/"+j.join(".")+s),this.hostname=R.join(".");break}}}if(this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var T=this.hostname.split("."),U=[],d=0;d<T.length;++d){var P=T[d];U.push(P.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(P):P)}this.hostname=U.join(".")}var A=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+A,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!O[i])for(var d=0,x=v.length;d<x;d++){var M=v[d],H=encodeURIComponent(M);H===M&&(H=escape(M)),s=s.split(M).join(H)}var W=s.indexOf("#");W!==-1&&(this.hash=s.substr(W),s=s.slice(0,W));var q=s.indexOf("?");if(q!==-1?(this.search=s.substr(q),this.query=s.substr(q+1),t&&(this.query=k.parse(this.query)),s=s.slice(0,q)):t&&(this.search="",this.query={}),s&&(this.pathname=s),C[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var A=this.pathname||"",P=this.search||"";this.path=A+P}return this.href=this.format(),this},s.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",a=this.pathname||"",s=this.hash||"",l=!1,i="";this.host?l=e+this.host:this.hostname&&(l=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(l+=":"+this.port)),this.query&&d(this.query)&&Object.keys(this.query).length&&(i=k.stringify(this.query));var o=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||C[t])&&l!==!1?(l="//"+(l||""),a&&"/"!==a.charAt(0)&&(a="/"+a)):l||(l=""),s&&"#"!==s.charAt(0)&&(s="#"+s),o&&"?"!==o.charAt(0)&&(o="?"+o),a=a.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+l+a+o+s},s.prototype.resolve=function(e){return this.resolveObject(l(e,!1,!0)).format()},s.prototype.resolveObject=function(e){if(r(e)){var t=new s;t.parse(e,!1,!0),e=t}var a=new s;if(Object.keys(this).forEach(function(e){a[e]=this[e]},this),a.hash=e.hash,""===e.href)return a.href=a.format(),a;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(a[t]=e[t])}),C[a.protocol]&&a.hostname&&!a.pathname&&(a.path=a.pathname="/"),a.href=a.format(),a;if(e.protocol&&e.protocol!==a.protocol){if(!C[e.protocol])return Object.keys(e).forEach(function(t){a[t]=e[t]}),a.href=a.format(),a;if(a.protocol=e.protocol,e.host||J[e.protocol])a.pathname=e.pathname;else{for(var l=(e.pathname||"").split("/");l.length&&!(e.host=l.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==l[0]&&l.unshift(""),l.length<2&&l.unshift(""),a.pathname=l.join("/")}if(a.search=e.search,a.query=e.query,a.host=e.host||"",a.auth=e.auth,a.hostname=e.hostname||e.host,a.port=e.port,a.pathname||a.search){var i=a.pathname||"",o=a.search||"";a.path=i+o}return a.slashes=a.slashes||e.slashes,a.href=a.format(),a}var n=a.pathname&&"/"===a.pathname.charAt(0),d=e.host||e.pathname&&"/"===e.pathname.charAt(0),h=d||n||a.host&&e.pathname,m=h,f=a.pathname&&a.pathname.split("/")||[],l=e.pathname&&e.pathname.split("/")||[],p=a.protocol&&!C[a.protocol];if(p&&(a.hostname="",a.port=null,a.host&&(""===f[0]?f[0]=a.host:f.unshift(a.host)),a.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===l[0]?l[0]=e.host:l.unshift(e.host)),e.host=null),h=h&&(""===l[0]||""===f[0])),d)a.host=e.host||""===e.host?e.host:a.host,a.hostname=e.hostname||""===e.hostname?e.hostname:a.hostname,a.search=e.search,a.query=e.query,f=l;else if(l.length)f||(f=[]),f.pop(),f=f.concat(l),a.search=e.search,a.query=e.query;else if(!u(e.search)){if(p){a.hostname=a.host=f.shift();var g=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@");g&&(a.auth=g.shift(),a.host=a.hostname=g.shift())}return a.search=e.search,a.query=e.query,c(a.pathname)&&c(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.href=a.format(),a}if(!f.length)return a.pathname=null,a.search?a.path="/"+a.search:a.path=null,a.href=a.format(),a;for(var v=f.slice(-1)[0],N=(a.host||e.host)&&("."===v||".."===v)||""===v,y=0,b=f.length;b>=0;b--)v=f[b],"."==v?f.splice(b,1):".."===v?(f.splice(b,1),y++):y&&(f.splice(b,1),y--);if(!h&&!m)for(;y--;y)f.unshift("..");!h||""===f[0]||f[0]&&"/"===f[0].charAt(0)||f.unshift(""),N&&"/"!==f.join("/").substr(-1)&&f.push("");var S=""===f[0]||f[0]&&"/"===f[0].charAt(0);if(p){a.hostname=a.host=S?"":f.length?f.shift():"";var g=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@");g&&(a.auth=g.shift(),a.host=a.hostname=g.shift())}return h=h||a.host&&f.length,h&&!S&&f.unshift(""),f.length?a.pathname=f.join("/"):(a.pathname=null,a.path=null),c(a.pathname)&&c(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.auth=e.auth||a.auth,a.slashes=a.slashes||e.slashes,a.href=a.format(),a},s.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,a){var s;(function(e,l){!function(i){function o(e){throw RangeError(R[e])}function n(e,t){for(var a=e.length,s=[];a--;)s[a]=t(e[a]);return s}function r(e,t){var a=e.split("@"),s="";a.length>1&&(s=a[0]+"@",e=a[1]),e=e.replace(D,".");var l=e.split("."),i=n(l,t).join(".");return s+i}function d(e){for(var t,a,s=[],l=0,i=e.length;l<i;)t=e.charCodeAt(l++),t>=55296&&t<=56319&&l<i?(a=e.charCodeAt(l++),56320==(64512&a)?s.push(((1023&t)<<10)+(1023&a)+65536):(s.push(t),l--)):s.push(t);return s}function c(e){return n(e,function(e){var t="";return e>65535&&(e-=65536,t+=T(e>>>10&1023|55296),e=56320|1023&e),t+=T(e)}).join("")}function u(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:S}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function m(e,t,a){var s=0;for(e=a?F(e/C):e>>1,e+=F(e/t);e>j*O>>1;s+=S)e=F(e/j);return F(s+(j+1)*e/(e+J))}function f(e){var t,a,s,l,i,n,r,d,h,f,p=[],g=e.length,v=0,N=x,y=k;for(a=e.lastIndexOf(w),a<0&&(a=0),s=0;s<a;++s)e.charCodeAt(s)>=128&&o("not-basic"),p.push(e.charCodeAt(s));for(l=a>0?a+1:0;l<g;){for(i=v,n=1,r=S;l>=g&&o("invalid-input"),d=u(e.charCodeAt(l++)),(d>=S||d>F((b-v)/n))&&o("overflow"),v+=d*n,h=r<=y?E:r>=y+O?O:r-y,!(d<h);r+=S)f=S-h,n>F(b/f)&&o("overflow"),n*=f;t=p.length+1,y=m(v-i,t,0==i),F(v/t)>b-N&&o("overflow"),N+=F(v/t),v%=t,p.splice(v++,0,N)}return c(p)}function p(e){var t,a,s,l,i,n,r,c,u,f,p,g,v,N,y,J=[];for(e=d(e),g=e.length,t=x,a=0,i=k,n=0;n<g;++n)p=e[n],p<128&&J.push(T(p));for(s=l=J.length,l&&J.push(w);s<g;){for(r=b,n=0;n<g;++n)p=e[n],p>=t&&p<r&&(r=p);for(v=s+1,r-t>F((b-a)/v)&&o("overflow"),a+=(r-t)*v,t=r,n=0;n<g;++n)if(p=e[n],p<t&&++a>b&&o("overflow"),p==t){for(c=a,u=S;f=u<=i?E:u>=i+O?O:u-i,!(c<f);u+=S)y=c-f,N=S-f,J.push(T(h(f+y%N,0))),c=F(y/N);J.push(T(h(c,0))),i=m(a,v,s==l),a=0,++s}++a,++t}return J.join("")}function g(e){return r(e,function(e){return _.test(e)?f(e.slice(4).toLowerCase()):e})}function v(e){return r(e,function(e){return L.test(e)?"xn--"+p(e):e})}var N=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof l&&l);N.global!==N&&N.window!==N&&N.self!==N||(i=N);var y,b=2147483647,S=36,E=1,O=26,J=38,C=700,k=72,x=128,w="-",_=/^xn--/,L=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=S-E,F=Math.floor,T=String.fromCharCode;y={version:"1.3.2",ucs2:{decode:d,encode:c},decode:f,encode:p,toASCII:v,toUnicode:g},s=function(){return y}.call(t,a,t,e),!(void 0!==s&&(e.exports=s))}(this)}).call(t,a(9)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,a){"use strict";t.decode=t.parse=a(11),t.encode=t.stringify=a(12)},function(e,t){"use strict";function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,s,l){t=t||"&",s=s||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var n=1e3;l&&"number"==typeof l.maxKeys&&(n=l.maxKeys);var r=e.length;n>0&&r>n&&(r=n);for(var d=0;d<r;++d){var c,u,h,m,f=e[d].replace(o,"%20"),p=f.indexOf(s);p>=0?(c=f.substr(0,p),u=f.substr(p+1)):(c=f,u=""),h=decodeURIComponent(c),m=decodeURIComponent(u),a(i,h)?Array.isArray(i[h])?i[h].push(m):i[h]=[i[h],m]:i[h]=m}return i}},function(e,t){"use strict";var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,s,l){return t=t||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(l){var i=encodeURIComponent(a(l))+s;return Array.isArray(e[l])?e[l].map(function(e){return i+encodeURIComponent(a(e))}).join(t):i+encodeURIComponent(a(e[l]))}).join(t):l?encodeURIComponent(a(l))+s+encodeURIComponent(a(e)):""}},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var l=a(2),i=s(l),o=a(3),n=s(o),r=a(14),d=s(r);ProtoGraph.Card.toStory.prototype.getData=function(e){return this.containerInstance.exportData()},ProtoGraph.Card.toStory.prototype.renderSEO=function(e){return this.renderMode="SEO",this.containerInstance.renderSEO()},ProtoGraph.Card.toStory.prototype.renderEdit=function(e){var t=this;this.mode="edit",this.onPublishCallback=e,n.default.render(i.default.createElement(d.default,{dataURL:this.options.data_url,schemaURL:this.options.schema_url,uiSchemaURL:this.options.ui_schema_url,domain:this.options.domain,optionalConfigURL:this.options.configuration_url,optionalConfigSchemaURL:this.options.configuration_schema_url,siteConfigURL:this.options.site_config_url,onPublishCallback:this.onPublishCallback,houseColors:this.options.houseColors,mode:this.mode,ref:function(e){t.containerInstance=t.containerInstance||e}}),this.options.selector)}},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),r=a(2),d=s(r),c=a(5),u=a(4),h=s(u),m=a(15),f=s(m),p=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={step:1,dataJSON:{},mode:"col16",loading:!0,publishing:!1,uiSchemaJSON:{},schemaJSON:void 0,optionalConfigJSON:{},optionalConfigSchemaJSON:void 0,refLinkDetails:void 0},a.refLinkSourcesURL=window.ref_link_sources_url,a.toggleMode=a.toggleMode.bind(a),a}return o(t,e),n(t,[{key:"exportData",value:function(){var e=this.state.dataJSON,t={step:this.state.step,dataJSON:e,schemaJSON:this.state.schemaJSON,uiSchemaJSON:this.state.uiSchemaJSON,optionalConfigJSON:this.state.optionalConfigJSON,optionalConfigSchemaJSON:this.state.optionalConfigSchemaJSON};return t.name=t.dataJSON.data.headline.substr(0,225),t}},{key:"componentDidMount",value:function(){var e=this;"string"==typeof this.props.dataURL&&(0,c.all)([(0,c.get)(this.props.dataURL),(0,c.get)(this.props.schemaURL),(0,c.get)(this.props.optionalConfigURL),(0,c.get)(this.props.optionalConfigSchemaURL),(0,c.get)(this.refLinkSourcesURL),(0,c.get)(this.props.uiSchemaURL),(0,c.get)(this.props.siteConfigURL)]).then((0,c.spread)(function(t,a,s,l,i,o,n){var r=t.data,d=void 0,c=r.data.url,u=c&&c.split("/"),h=void 0,m=u&&u[2],f=void 0;if(i.data.forEach(function(e){var t=e.url&&e.url.split("/"),a=t&&t[2];a===m&&(d=e.favicon_url,h=e.name)}),r.data.faviconurl=d,r.data.domainurl=m,r.data.publishername=h,r.data.publishedat=(new Date).toISOString(),window.intersection_names&&window.intersection_names.length){a.data.properties.data.properties.genre.enum=window.intersection_names;var p=JSON.parse(JSON.stringify(window.intersection_names));p[0]="Blank",a.data.properties.data.properties.genre.enumNames=p}if(window.subintersection_names&&window.subintersection_names.length){a.data.properties.data.properties.subgenre.enum=window.subintersection_names;var g=JSON.parse(JSON.stringify(window.subintersection_names));g[0]="Blank",a.data.properties.data.properties.subgenre.enumNames=g}f={dataJSON:r,schemaJSON:a.data,uiSchemaJSON:o.data,optionalConfigJSON:s.data,optionalConfigSchemaJSON:l.data,refLinkDetails:i.data,siteConfigs:n.data},f.optionalConfigJSON.house_colour=f.siteConfigs.house_colour,f.optionalConfigJSON.reverse_house_colour=f.siteConfigs.reverse_house_colour,f.optionalConfigJSON.font_colour=f.siteConfigs.font_colour,f.optionalConfigJSON.reverse_font_colour=f.siteConfigs.reverse_font_colour,f.optionalConfigJSON.story_card_flip=f.siteConfigs.story_card_flip,f.dataJSON.data.language=f.siteConfigs.primary_language.toLowerCase(),e.setState(f)})).catch(function(t){console.error(t),e.setState({errorOnFetchingData:!0})})}},{key:"onChangeHandler",value:function(e){var t=this,a=e.formData;switch(this.state.step){case 1:this.setState(function(e,s){var l=e.dataJSON,i=void 0,o=a.data.url,n=o&&o.split("/"),r=void 0,d=n&&n[2];return t.state.refLinkDetails.forEach(function(e){var t=e.url&&e.url.split("/"),a=t&&t[2];a===d&&(i=e.favicon_url,r=e.name)}),a.data.faviconurl=i,a.data.domainurl=d,a.data.publishername=r,a.data.interactive=!!(a.data.hasimage||a.data.hasvideo||a.data.hasdata),
l=a,{dataJSON:l}})}}},{key:"onSubmitHandler",value:function(e){var t=this;e.formData;switch(this.state.step){case 1:if("function"==typeof this.props.onPublishCallback){this.setState({publishing:!0});var a=this.props.onPublishCallback();a.then(function(e){t.setState({publishing:!1})})}}}},{key:"renderSEO",value:function(){var e=this.state.dataJSON.data,t=void 0;return t="<blockquote><a href="+e.url+' rel="nofollow">'+(e.headline?"<h2>"+e.headline+"</h2>":"")+"</a>"+(e.byline?"<p>"+e.byline+"</p>":"")+(e.publishedat?"<p>"+e.publishedat+"</p>":"")+(e.series?"<p>"+e.series+"</p>":"")+(e.genre?"<p>"+e.genre+"</p>":"")+(e.subgenre?"<p>"+e.subgenre+"</p>":"")+(e.summary?"<p>"+e.summary+"</p>":"")+"</blockquote>"}},{key:"renderSchemaJSON",value:function(){switch(this.state.step){case 1:return this.state.schemaJSON}}},{key:"renderFormData",value:function(){switch(this.state.step){case 1:return this.state.dataJSON}}},{key:"showLinkText",value:function(){switch(this.state.step){case 1:return""}}},{key:"showButtonText",value:function(){switch(this.state.step){case 1:return"Publish"}}},{key:"onPrevHandler",value:function(){var e=--this.state.step;this.setState({step:e})}},{key:"toggleMode",value:function(e){var t=this,a=e.target.closest("a"),s=a.getAttribute("data-mode");this.setState(function(e,t){return{mode:"blank"}},function(){t.setState(function(e,t){var a=void 0;return a=s!==e.mode?s:e.mode,{mode:a}})})}},{key:"render",value:function(){var e=this;return void 0===this.state.schemaJSON?d.default.createElement("div",null,"Loading"):d.default.createElement("div",{className:"proto-container"},d.default.createElement("div",{className:"ui grid form-layout"},d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"four wide column proto-card-form protograph-scroll-form"},d.default.createElement("div",null,d.default.createElement("div",{className:"section-title-text"},"Fill the form"),d.default.createElement("div",{className:"ui label proto-pull-right"},"toStory")),d.default.createElement(f.default,{uiSchema:this.state.uiSchemaJSON,schema:this.renderSchemaJSON(),onSubmit:function(t){return e.onSubmitHandler(t)},onChange:function(t){return e.onChangeHandler(t)},formData:this.renderFormData()},d.default.createElement("a",{id:"protograph-prev-link",className:""+(this.state.publishing?"protograph-disable":""),onClick:function(t){return e.onPrevHandler(t)}},this.showLinkText()," "),d.default.createElement("button",{type:"submit",className:(this.state.publishing?"ui primary loading disabled button":"")+" default-button protograph-primary-button"},this.showButtonText()))),d.default.createElement("div",{className:"twelve wide column proto-card-preview proto-share-card-div"},d.default.createElement("div",{className:"protograph-menu-container"},d.default.createElement("div",{className:"ui compact menu"},d.default.createElement("a",{className:"item "+("col16"===this.state.mode?"active":""),"data-mode":"col16",onClick:this.toggleMode},"16c-cover"),d.default.createElement("a",{className:"item "+("col7"===this.state.mode?"active":""),"data-mode":"col7",onClick:this.toggleMode},"7c"),d.default.createElement("a",{className:"item "+("col4"===this.state.mode?"active":""),"data-mode":"col4",onClick:this.toggleMode},"4c"),d.default.createElement("a",{className:"item "+("col3"===this.state.mode?"active":""),"data-mode":"col3",onClick:this.toggleMode},"3c"),d.default.createElement("a",{className:"item "+("col2"===this.state.mode?"active":""),"data-mode":"col2",onClick:this.toggleMode},"2c"))),"blank"==this.state.mode?d.default.createElement("div",null):d.default.createElement("div",{className:"protograph-app-holder"},d.default.createElement(h.default,{mode:this.state.mode,dataJSON:this.state.dataJSON,domain:this.props.domain,optionalConfigJSON:this.state.optionalConfigJSON,linkDetails:this.state.refLinkDetails}))))))}}]),t}(d.default.Component);t.default=p},function(e,t){e.exports=JSONSchemaForm}]);