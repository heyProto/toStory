!function(t){function e(s){if(a[s])return a[s].exports;var l=a[s]={exports:{},id:s,loaded:!1};return t[s].call(l.exports,l,l.exports,e),l.loaded=!0,l.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){a(1),t.exports=a(13)},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}var l=a(2),i=s(l),r=a(3),o=a(4),n=s(o);window.ProtoGraph=window.ProtoGraph||{},window.ProtoGraph.Card=window.ProtoGraph.Card||{},ProtoGraph.Card.toStory=function(){this.cardType="toStoryCard"},ProtoGraph.Card.toStory.prototype.init=function(t){this.options=t},ProtoGraph.Card.toStory.prototype.getData=function(t){return this.containerInstance.exportData()},ProtoGraph.Card.toStory.prototype.renderSixteenCol=function(t){this.mode="col16",this.render()},ProtoGraph.Card.toStory.prototype.renderSevenCol=function(t){this.mode="col7",this.render()},ProtoGraph.Card.toStory.prototype.renderFourCol=function(t){this.mode="col4",this.render()},ProtoGraph.Card.toStory.prototype.renderThreeCol=function(t){this.mode="col3",this.render()},ProtoGraph.Card.toStory.prototype.renderTwoCol=function(t){this.mode="col2",this.render()},ProtoGraph.Card.toStory.prototype.render=function(){var t=this;this.options.isFromSSR?(0,r.hydrate)(i.default.createElement(n.default,{mode:this.mode,dataJSON:this.options.initialState.dataJSON}),this.options.selector):(0,r.render)(i.default.createElement(n.default,{dataURL:this.options.data_url,selector:this.options.selector,domain:this.options.domain,siteConfigURL:this.options.site_config_url,siteConfigs:this.options.site_configs,clickCallback:this.options.onClickCallback,mode:this.mode,ref:function(e){t.containerInstance=t.containerInstance||e}}),this.options.selector)}},function(t,e){t.exports=React},function(t,e){t.exports=ReactDOM},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),n=a(2),d=s(n),c=(a(3),a(5)),u=a(6),h=s(u),m=a(7),f=function(t){function e(t){l(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),s={fetchingData:!0,dataJSON:{card_data:{},configs:{}},domain:void 0,optionalConfigJSON:{}};return console.log("PROPS: "+JSON.stringify(a.props)),a.props.dataJSON&&(s.fetchingData=!1,s.dataJSON=a.props.dataJSON,s.languageTexts=a.getLanguageTexts(a.props.dataJSON.card_data.data.language)),a.props.optionalConfigJSON&&(s.optionalConfigJSON=a.props.optionalConfigJSON),a.props.domain&&(s.domain=a.props.domain),a.props.siteConfigs&&(s.siteConfigs=a.props.siteConfigs),a.state=s,console.log("constructor: State: ",a.state.fetchingData),a}return r(e,t),o(e,[{key:"componentDidMount",value:function(){var t=this;if(this.state.fetchingData){var e=[(0,c.get)(this.props.dataURL)];this.props.siteConfigURL&&e.push((0,c.get)(this.props.siteConfigURL)),(0,c.all)(e).then((0,c.spread)(function(e,a){var s={fetchingData:!1,dataJSON:{card_data:e.data},optionalConfigJSON:{}};a?s.siteConfigs=a.data:s.siteConfigs=t.state.siteConfigs,s.optionalConfigJSON.house_colour=s.siteConfigs.house_colour,s.optionalConfigJSON.reverse_house_colour=s.siteConfigs.reverse_house_colour,s.optionalConfigJSON.font_colour=s.siteConfigs.font_colour,s.optionalConfigJSON.reverse_font_colour=s.siteConfigs.reverse_font_colour,s.optionalConfigJSON.story_card_style=s.siteConfigs.story_card_style,s.optionalConfigJSON.story_card_flip=s.siteConfigs.story_card_flip,s.languageTexts=t.getLanguageTexts(s.siteConfigs.primary_language.toLowerCase()),t.setState(s)}))}else console.log("ISFromSSR",!this.props.isFromSSR),this.props.renderingSSR||this.componentDidUpdate()}},{key:"componentWillReceiveProps",value:function(t){t.dataJSON&&this.setState({dataJSON:t.dataJSON})}},{key:"componentDidUpdate",value:function(){if("col2"===this.props.mode&&this.ellipsizeTextBox(),this.state.optionalConfigJSON.story_card_flip&&this.state.dataJSON.card_data.data.summary){var t=document.querySelector(".protograph-summary-text");this.multiLineTruncate(t)}}},{key:"multiLineTruncate",value:function(t){var e=this.state.dataJSON.card_data.data,a=e.summary.split(" ");this.props;if(t)for(;t.scrollHeight>t.offsetHeight;)a.pop(),t.innerHTML=a.join(" ")+'...<br><a id="read-more-button" href="#" class="protograph-read-more">Read more</a>'}},{key:"exportData",value:function(){return this.props.selector.getBoundingClientRect()}},{key:"checkURL",value:function(t){var e=/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/;return!!e.test(t)}},{key:"calculateDateTime",value:function(){var t=this.state.dataJSON.card_data,e=void 0,a=void 0,s=void 0,l=void 0,i=void 0;e=t.data.date.split("T")[0],a=e.split("-"),s=new Date(e),l=s.toLocaleString("en-us",{month:"short"}),i=t.data.date.split("T")[1];var r=i.split(":"),o=void 0;return o=r[0]<"12"?"am":"pm",{month:l,am_pm:o,date:a,time:i}}},{key:"ellipsizeTextBox",value:function(){var t=document.querySelector(".article-title"),e=document.querySelector(".article-title"),a=void 0,s=this.state.dataJSON.card_data.data.headline;if(""===s||void 0===s)e.innerHTML="";else for(e.innerHTML=this.state.dataJSON.card_data.data.headline,a=this.state.dataJSON.card_data.data.headline.split(" ");t.offsetHeight>80;)a.pop(),e.innerHTML=a.join(" ")+"..."}},{key:"handleClick",value:function(){window.open(this.state.dataJSON.card_data.data.url,"_top")}},{key:"matchDomain",value:function(t,e){var a=this.getDomainFromURL(e).replace(/^(https?:\/\/)?(www\.)?/,""),s=this.subDomain(t),l=this.subDomain(a);return s?t===a||t.indexOf(a)>=0:l?t===a||a.indexOf(t)>=0:t===a}},{key:"getDomainFromURL",value:function(t){var e=(0,m.parse)(t);return e.hostname}},{key:"subDomain",value:function t(e){e||(e=""),e=e.replace(new RegExp(/^\s+/),""),e=e.replace(new RegExp(/\s+$/),""),e=e.replace(new RegExp(/\\/g),"/"),e=e.replace(new RegExp(/^http\:\/\/|^https\:\/\/|^ftp\:\/\//i),""),e=e.replace(new RegExp(/^www\./i),""),e=e.replace(new RegExp(/\/(.*)/),""),e.match(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i))?e=e.replace(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i),""):e.match(new RegExp(/\.[a-z]{2,4}$/i))&&(e=e.replace(new RegExp(/\.[a-z]{2,4}$/i),""));var t=!!e.match(new RegExp(/\./g));return t}},{key:"renderSixteenCol",value:function(){var t=this;if(console.log("Fetching Data: ",this.state.fetchingData),this.state.fetchingData)return d.default.createElement("div",null,"Loading");var e="rgba(51, 51, 51, 0.75)",a="#fff";this.state.dataJSON.card_data.data.interactive&&(e=this.state.optionalConfigJSON.house_colour,a=this.state.optionalConfigJSON.font_colour),this.state.dataJSON.card_data.data.sponsored&&(e=this.state.optionalConfigJSON.reverse_house_colour,a=this.state.optionalConfigJSON.reverse_font_colour);var s=this.state.dataJSON.card_data.data.faviconurl,l=this.state.dataJSON.card_data.data.url,i=this.state.dataJSON.card_data.data.left||50,r=this.state.dataJSON.card_data.data.top||50,o=void 0,n=void 0,c=l&&l.split("/");c&&c[2];this.matchDomain(this.state.domain,l)&&(s=void 0);var u=this.state.dataJSON.card_data.data.byline,m=this.state.dataJSON.card_data.data.publishedat,f=this.state.dataJSON.card_data.data.focus,p="";u&&(p=p+"By "+u),u&&m&&NaN!=m&&(p+=" . "),m&&NaN!=m&&(p+=h.default.ago(m));var g=this.state.dataJSON.card_data.data.imageurl;this.checkURL(g)||(g=void 0);var v=window.vertical_name||this.state.dataJSON.card_data.data.series,N=this.state.dataJSON.card_data.data.genre,y="1px 1px 1px 5px";!N&&v&&(y="2.5px 5px"),v||N||(y="0px"),N&&!v&&(y="1px");var b="h"===f?{width:1260}:{width:680};if(g)switch(this.state.optionalConfigJSON.story_card_style){case"Clear: Black & White":b="h"===f?{width:1260,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"}:{width:680,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"};break;case"Blur: Color":b="h"===f?{width:1260,WebkitFilter:"blur(5px)",filter:"blur(5px);"}:{width:680,WebkitFilter:"blur(5px)",filter:"blur(5px);"}}return"h"===f?(b.left=i+"%",b.top=r+"%",o=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,n=100-r>=0&&100-r<=100?100-r:100-r<0?0:100,b.transform="translate(-"+o+"%,-"+n+"%)",d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-16-story-card"},d.default.createElement("div",{className:"padding20"},g?d.default.createElement("img",{className:"image-styling",style:b,src:g}):null,g?d.default.createElement("div",{className:"title-background"}):null,g?d.default.createElement("div",{className:"col-16-diag-grad"}):null,d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre)),d.default.createElement("div",{className:"article-title"},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line"},!this.state.dataJSON.card_data.data.hide_byline&&p)))))):d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-16-story-card"},d.default.createElement("div",{className:"col-16-block-left bottom-pull-div"},d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre)),d.default.createElement("div",{className:"article-title"},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line"},!this.state.dataJSON.card_data.data.hide_byline&&p)),d.default.createElement("div",{className:"col-16-block-right"},g?d.default.createElement("img",{className:"image-styling-v",style:b,src:g}):null,g?d.default.createElement("div",{className:"title-background"}):null,g?d.default.createElement("div",{className:"col-16-diag-grad"}):null)))}},{key:"renderSevenCol",value:function(){var t=this;if(this.state.fetchingData)return d.default.createElement("div",null,"Loading");var e="rgba(51, 51, 51, 0.75)",a="#fff";this.state.dataJSON.card_data.data.interactive&&(e=this.state.optionalConfigJSON.house_colour,a=this.state.optionalConfigJSON.font_colour),this.state.dataJSON.card_data.data.sponsored&&(e=this.state.optionalConfigJSON.reverse_house_colour,a=this.state.optionalConfigJSON.reverse_font_colour);var s=this.state.dataJSON.card_data.data.faviconurl,l=this.state.dataJSON.card_data.data.url,i=this.state.dataJSON.card_data.data.left||50,r=this.state.dataJSON.card_data.data.top||50,o=void 0,n=void 0;this.matchDomain(this.state.domain,l)&&(s=void 0);var c=this.state.dataJSON.card_data.data.col7imageurl;this.state.dataJSON.card_data.data.col7imageurl||(c=this.state.dataJSON.card_data.data.imageurl),this.checkURL(c)||(c=void 0);var u=this.state.dataJSON.card_data.data.byline,m=this.state.dataJSON.card_data.data.publishedat,f=this.state.dataJSON.card_data.data.focus,p="";u&&(p=p+"By "+u),u&&m&&NaN!=m&&(p+=" . "),m&&NaN!=m&&(p+=h.default.ago(m));var g=window.vertical_name||this.state.dataJSON.card_data.data.series,v=this.state.dataJSON.card_data.data.genre,N="1px 1px 1px 5px";!v&&g&&(N="2.5px 5px"),g||v||(N="0px"),v&&!g&&(N="1px");var y="h"===f?{width:540}:{width:"100%",height:250};if(c)switch(this.state.optionalConfigJSON.story_card_style){case"Clear: Black & White":y="h"===f?{width:540,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"}:{width:"100%",WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);",height:250};break;case"Blur: Color":y="h"===f?{width:540,WebkitFilter:"blur(5px)",filter:"blur(5px);"}:{width:"100%",WebkitFilter:"blur(5px)",filter:"blur(5px);",height:250}}var b=void 0;return c&&(b={width:240}),this.state.optionalConfigJSON.story_card_flip&&this.state.dataJSON.card_data.data.summary?"h"===f?(y.left=i+"%",y.top=r+"%",o=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,n=100-r>=0&&100-r<=100?100-r:100-r<0?0:100,y.transform="translate(-"+o+"%,-"+n+"%)",d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-7-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"padding12"},c?d.default.createElement("img",{className:"image-styling",style:y,src:c}):d.default.createElement("div",{className:"image-styling",style:{backgroundColor:"#fafafa",height:250,width:540}}),c?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},g,v?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:g?"3px":"0px"}},v," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:c?"white":"black"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:c?"white":"black"}},!this.state.dataJSON.card_data.data.hide_byline&&p)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.card_data.data.summary)))))))):d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-7-story-card",style:{backgroundColor:"#fafafa"}},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"card-tags",style:{position:"absolute",top:"0px",padding:"12px"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},g,v?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:g?"3px":"0px"}},v," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre)),d.default.createElement("div",{className:"col-7-block-left bottom-pull-div",style:b},d.default.createElement("div",{className:"article-title",style:{color:"black"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.card_data.data.hide_byline&&p)),d.default.createElement("div",{className:"col-7-block-right"},d.default.createElement("img",{style:y,src:c}),c?d.default.createElement("div",{className:"title-background"}):null)),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.card_data.data.summary))))))):"h"===f?(y.left=i+"%",y.top=r+"%",o=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,n=100-r>=0&&100-r<=100?100-r:100-r<0?0:100,y.transform="translate(-"+o+"%,-"+n+"%)",d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-7-story-card"},d.default.createElement("div",{className:"padding12"},c?d.default.createElement("img",{className:"image-styling",style:y,src:c}):d.default.createElement("div",{className:"image-styling",style:{backgroundColor:"#fafafa",height:250,width:540}}),c?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},g,v?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:g?"3px":"0px"}},v," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:c?"white":"black"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:c?"white":"black"}},!this.state.dataJSON.card_data.data.hide_byline&&p)))))):d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-7-story-card",style:{backgroundColor:"#fafafa"}},d.default.createElement("div",{className:"card-tags",style:{position:"absolute",top:"0px",padding:"12px"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},g,v?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:g?"3px":"0px"}},v," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre)),d.default.createElement("div",{className:"col-7-block-left bottom-pull-div",style:b},d.default.createElement("div",{className:"article-title",style:{color:"black"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.card_data.data.hide_byline&&p)),d.default.createElement("div",{className:"col-7-block-right"},d.default.createElement("img",{style:y,src:c}),c?d.default.createElement("div",{className:"title-background"}):null)))}},{key:"renderFourCol",value:function(){var t=this;if(this.state.fetchingData)return d.default.createElement("div",null,"Loading");var e="rgba(51, 51, 51, 0.75)",a="#fff";this.state.dataJSON.card_data.data.interactive&&(e=this.state.optionalConfigJSON.house_colour,a=this.state.optionalConfigJSON.font_colour),this.state.dataJSON.card_data.data.sponsored&&(e=this.state.optionalConfigJSON.reverse_house_colour,a=this.state.optionalConfigJSON.reverse_font_colour);var s=this.state.dataJSON.card_data.data.faviconurl,l=this.state.dataJSON.card_data.data.url,i=this.state.dataJSON.card_data.data.left||50,r=this.state.dataJSON.card_data.data.top||50,o=void 0,n=void 0,c=l&&l.split("/");c&&c[2];this.matchDomain(this.state.domain,l)&&(s=void 0);var u=this.state.dataJSON.card_data.data.col7imageurl;this.state.dataJSON.card_data.data.col7imageurl||(u=this.state.dataJSON.card_data.data.imageurl),this.checkURL(u)||(u=void 0);var m=this.state.dataJSON.card_data.data.byline,f=this.state.dataJSON.card_data.data.publishedat,p=this.state.dataJSON.card_data.data.focus,g="";m&&(g=g+"By "+m),m&&f&&NaN!=f&&(g+=" . "),f&&NaN!=f&&(g+=h.default.ago(f));var v=window.vertical_name||this.state.dataJSON.card_data.data.series,N=this.state.dataJSON.card_data.data.genre,y="1px 1px 1px 5px";!N&&v&&(y="2.5px 5px"),v||N||(y="0px"),N&&!v&&(y="1px");var b="h"===p?{height:250}:{height:150};if(u)switch(this.state.optionalConfigJSON.story_card_style){case"Clear: Black & White":b="h"===p?{height:250,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"}:{height:150,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"};break;case"Blur: Color":b="h"===p?{height:250,WebkitFilter:"blur(5px)",filter:"blur(5px);"}:{height:150,WebkitFilter:"blur(5px)",filter:"blur(5px);"}}return this.state.optionalConfigJSON.story_card_flip&&this.state.dataJSON.card_data.data.summary?"h"===p?(b.left=i+"%",b.top=r+"%",o=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,n=100-r>=0&&100-r<=100?100-r:100-r<0?0:100,b.transform="translate(-"+o+"%,-"+n+"%)",d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-4-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"padding12"},u?d.default.createElement("img",{className:"image-styling",style:b,src:u}):d.default.createElement("div",{className:"image-styling",style:{backgroundColor:"#fafafa",height:250,width:300}}),u?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:u?"white":"black"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:u?"white":"black"}},!this.state.dataJSON.card_data.data.hide_byline&&g)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.card_data.data.summary)))))))):d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-4-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"col-4-block-top"},d.default.createElement("img",{className:"image-centering",style:b,src:u}),d.default.createElement("div",{className:"card-tags padding12",style:{top:0,position:"absolute"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre))),d.default.createElement("div",{className:"col-4-block-bottom"},d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:"black",maxHeight:25,overflow:"hidden"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.card_data.data.hide_byline&&g)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.card_data.data.summary))))))):"h"===p?(b.left=i+"%",b.top=r+"%",o=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,n=100-r>=0&&100-r<=100?100-r:100-r<0?0:100,b.transform="translate(-"+o+"%,-"+n+"%)",d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-4-story-card"},d.default.createElement("div",{className:"padding12"},u?d.default.createElement("img",{className:"image-styling",style:b,src:u}):d.default.createElement("div",{className:"image-styling",style:{backgroundColor:"#fafafa",height:250,width:300}}),u?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:u?"white":"black"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:u?"white":"black"}},!this.state.dataJSON.card_data.data.hide_byline&&g)))))):d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-4-story-card"},d.default.createElement("div",{className:"col-4-block-top"},d.default.createElement("img",{className:"image-centering",style:b,src:u}),d.default.createElement("div",{className:"card-tags padding12",style:{top:0,position:"absolute"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre))),d.default.createElement("div",{className:"col-4-block-bottom"},d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:"black",maxHeight:25,overflow:"hidden"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.card_data.data.hide_byline&&g)))))}},{key:"renderThreeCol",value:function(){var t=this;if(this.state.fetchingData)return d.default.createElement("div",null,"Loading");var e="rgba(51, 51, 51, 0.75)",a="#fff";this.state.dataJSON.card_data.data.interactive&&(e=this.state.optionalConfigJSON.house_colour,a=this.state.optionalConfigJSON.font_colour),this.state.dataJSON.card_data.data.sponsored&&(e=this.state.optionalConfigJSON.reverse_house_colour,a=this.state.optionalConfigJSON.reverse_font_colour);var s=this.state.dataJSON.card_data.data.faviconurl,l=this.state.dataJSON.card_data.data.url,i=this.state.dataJSON.card_data.data.left||50,r=this.state.dataJSON.card_data.data.top||50,o=void 0,n=void 0,c=l&&l.split("/");c&&c[2];this.matchDomain(this.state.domain,l)&&(s=void 0);var u=this.state.dataJSON.card_data.data.col7imageurl;this.state.dataJSON.card_data.data.col7imageurl||(u=this.state.dataJSON.card_data.data.imageurl),this.checkURL(u)||(u=void 0);var m=this.state.dataJSON.card_data.data.byline,f=this.state.dataJSON.card_data.data.publishedat,p=this.state.dataJSON.card_data.data.focus,g="";m&&(g=g+"By "+m),m&&f&&NaN!=f&&(g+=" . "),f&&NaN!=f&&(g+=h.default.ago(f));var v=window.vertical_name||this.state.dataJSON.card_data.data.series,N=this.state.dataJSON.card_data.data.genre,y="1px 1px 1px 5px";
!N&&v&&(y="2.5px 5px"),v||N||(y="0px"),N&&!v&&(y="1px");var b="h"===p?{height:250}:{height:132};if(u)switch(this.state.optionalConfigJSON.story_card_style){case"Clear: Black & White":b="h"===p?{height:250,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"}:{height:132,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"};break;case"Blur: Color":b="h"===p?{height:250,WebkitFilter:"blur(5px)",filter:"blur(5px);"}:{height:132,WebkitFilter:"blur(5px)",filter:"blur(5px);"}}return this.state.optionalConfigJSON.story_card_flip&&this.state.dataJSON.card_data.data.summary?"h"===p?(b.left=i+"%",b.top=r+"%",o=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,n=100-r>=0&&100-r<=100?100-r:100-r<0?0:100,b.transform="translate(-"+o+"%,-"+n+"%)",d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-3-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"padding12"},u?d.default.createElement("img",{className:"image-styling",style:b,src:u}):d.default.createElement("div",{className:"image-styling",style:{backgroundColor:"#fafafa",height:250,width:300}}),u?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:u?"white":"black"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:u?"white":"black"}},!this.state.dataJSON.card_data.data.hide_byline&&g)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.card_data.data.summary)))))))):d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-3-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"col-3-block-top"},d.default.createElement("img",{className:"image-centering",style:b,src:u}),d.default.createElement("div",{className:"card-tags padding12",style:{top:0,position:"absolute"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre))),d.default.createElement("div",{className:"col-3-block-bottom"},d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:"black",maxHeight:55}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.card_data.data.hide_byline&&g)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.card_data.data.summary))))))):"h"===p?(b.left=i+"%",b.top=r+"%",o=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,n=100-r>=0&&100-r<=100?100-r:100-r<0?0:100,b.transform="translate(-"+o+"%,-"+n+"%)",d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-3-story-card"},d.default.createElement("div",{className:"padding12"},u?d.default.createElement("img",{className:"image-styling",style:b,src:u}):d.default.createElement("div",{className:"image-styling",style:{backgroundColor:"#fafafa",height:250,width:220}}),u?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:u?"white":"black"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:u?"white":"black"}},!this.state.dataJSON.card_data.data.hide_byline&&g)))))):d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-3-story-card"},d.default.createElement("div",{className:"col-3-block-top"},d.default.createElement("img",{className:"image-centering",style:b,src:u}),d.default.createElement("div",{className:"card-tags padding12",style:{top:0,position:"absolute"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:y}},v,N?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a,marginLeft:v?"3px":"0px"}},N," "):null),d.default.createElement("div",{className:"sub-genre-light",style:{fontStyle:this.state.dataJSON.card_data.data.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.card_data.data.sponsored?"underline":"none"}},this.state.dataJSON.card_data.data.sponsored?"Sponsored":this.state.dataJSON.card_data.data.subgenre))),d.default.createElement("div",{className:"col-3-block-bottom"},d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:"black",maxHeight:55}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.card_data.data.hide_byline&&g)))))}},{key:"renderTwoCol",value:function(){var t=this;if(this.state.fetchingData)return d.default.createElement("div",null,"Loading");var e="rgba(51, 51, 51, 0.75)",a="#fff";this.state.dataJSON.card_data.data.interactive&&(e=this.state.optionalConfigJSON.house_colour,a=this.state.optionalConfigJSON.font_colour),this.state.dataJSON.card_data.data.sponsored&&(e=this.state.optionalConfigJSON.reverse_house_colour,a=this.state.optionalConfigJSON.reverse_font_colour);var s=this.state.dataJSON.card_data.data.faviconurl,l=this.state.dataJSON.card_data.data.url,i=this.state.dataJSON.card_data.data.left||50,r=this.state.dataJSON.card_data.data.top||50,o=void 0,n=void 0,c=l&&l.split("/");c&&c[2];this.matchDomain(this.state.domain,l)&&(s=void 0);var u=this.state.dataJSON.card_data.data.col7imageurl;this.state.dataJSON.card_data.data.col7imageurl||(u=this.state.dataJSON.card_data.data.imageurl),this.checkURL(u)||(u=void 0);var m=this.state.dataJSON.card_data.data.byline,f=this.state.dataJSON.card_data.data.publishedat,p=this.state.dataJSON.card_data.data.focus,g="";m&&(g=g+"By "+m),m&&f&&NaN!=f&&(g+=" . "),f&&NaN!=f&&(g+=h.default.ago(f));var v=(window.vertical_name||this.state.dataJSON.card_data.data.series,this.state.dataJSON.card_data.data.genre),N=v?"1px":"0px",y="h"===p?{height:250}:{height:84};if(u)switch(this.state.optionalConfigJSON.story_card_style){case"Clear: Black & White":y="h"===p?{height:250,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"}:{height:84,WebkitFilter:"grayscale(100%)",filter:"grayscale(100%);"};break;case"Blur: Color":y="h"===p?{height:250,WebkitFilter:"blur(5px)",filter:"blur(5px);"}:{height:84,WebkitFilter:"blur(5px)",filter:"blur(5px);"}}return this.state.optionalConfigJSON.story_card_flip&&this.state.dataJSON.card_data.data.summary?"h"===p?(y.left=i+"%",y.top=r+"%",o=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,n=100-r>=0&&100-r<=100?100-r:100-r<0?0:100,y.transform="translate(-"+o+"%,-"+n+"%)",d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-2-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"padding12"},u?d.default.createElement("img",{className:"image-styling",style:y,src:u}):d.default.createElement("div",{className:"image-styling",style:{zIndex:"-1",backgroundColor:"#fafafa",height:250,width:140}}),u?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white",marginRight:"4px"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},this.state.dataJSON.card_data.data.genre?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a}},this.state.dataJSON.card_data.data.genre," "):null)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:u?"white":"black"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:u?"white":"black"}},!this.state.dataJSON.card_data.data.hide_byline&&g)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.card_data.data.summary)))))))):d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-2-story-card"},d.default.createElement("div",{className:"flip-container",style:{position:"relative"}},d.default.createElement("div",{className:"flipper",style:{position:"relative",height:250}},d.default.createElement("div",{className:"front",style:{position:"relative",height:250}},d.default.createElement("div",{className:"col-2-block-top"},d.default.createElement("img",{className:"image-centering",style:y,src:u}),d.default.createElement("div",{className:"card-tags padding12",style:{top:0,position:"absolute"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white",marginRight:"4px"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},this.state.dataJSON.card_data.data.genre?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a}},this.state.dataJSON.card_data.data.genre," "):null))),d.default.createElement("div",{className:"col-2-block-bottom"},d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:"black"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.card_data.data.hide_byline&&g)))),d.default.createElement("div",{className:"back",style:{height:250}},d.default.createElement("div",{className:"padding12"},d.default.createElement("p",{className:"protograph-summary-text",style:{fontFamily:this.state.languageTexts.font,maxHeight:225}},this.state.dataJSON.card_data.data.summary))))))):"h"===p?(y.left=i+"%",y.top=r+"%",o=100-i>=0&&100-i<=100?100-i:100-i<0?0:100,n=100-r>=0&&100-r<=100?100-r:100-r<0?0:100,y.transform="translate(-"+o+"%,-"+n+"%)",d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-2-story-card"},d.default.createElement("div",{className:"padding12"},u?d.default.createElement("img",{className:"image-styling",style:y,src:u}):d.default.createElement("div",{className:"image-styling",style:{zIndex:"-1",backgroundColor:"#fafafa",height:250,width:140}}),u?d.default.createElement("div",{className:"title-background"}):null,d.default.createElement("div",{className:"card-tags"},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white",marginRight:"4px"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},this.state.dataJSON.card_data.data.genre?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a}},this.state.dataJSON.card_data.data.genre," "):null)),d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:u?"white":"black"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:u?"white":"black"}},!this.state.dataJSON.card_data.data.hide_byline&&g)))))):d.default.createElement("div",{onClick:function(){t.handleClick()}},d.default.createElement("div",{className:"col-2-story-card"},d.default.createElement("div",{className:"col-2-block-top"},d.default.createElement("img",{className:"image-centering",style:y,src:u}),d.default.createElement("div",{className:"card-tags padding12",style:{top:0,position:"absolute"}},s?d.default.createElement("div",{className:"publisher-icon",style:{backgroundColor:this.state.dataJSON.card_data.data.iconbgcolor||"white",marginRight:"4px"}},d.default.createElement("img",{className:"favicon",src:s})):null,d.default.createElement("div",{className:"series-name",style:{padding:N}},this.state.dataJSON.card_data.data.genre?d.default.createElement("div",{className:"genre",style:{backgroundColor:e,color:a}},this.state.dataJSON.card_data.data.genre," "):null))),d.default.createElement("div",{className:"col-2-block-bottom"},d.default.createElement("div",{className:"bottom-pull-div"},d.default.createElement("div",{className:"article-title",style:{color:"black"}},this.state.dataJSON.card_data.data.headline),d.default.createElement("div",{className:"by-line",style:{color:"#8e8e8e"}},!this.state.dataJSON.card_data.data.hide_byline&&g)))))}},{key:"getLanguageTexts",value:function(t){var e=t?t:"hindi",a=void 0;switch(e.toLowerCase()){case"hindi":a={font:"'Sarala', sans-serif"};break;default:a={font:void 0}}return a}},{key:"render",value:function(){switch(console.log("THIS WAS EXECUTED",this.props.mode),this.props.mode){case"col16":return this.renderSixteenCol();case"col7":return this.renderSevenCol();case"col4":return this.renderFourCol();case"col3":return this.renderThreeCol();case"col2":return this.renderTwoCol()}}}]),e}(d.default.Component);e.default=f},function(t,e){t.exports=axios},function(module,exports){"use strict";var timeago=function(){var o={second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},obj={};return obj.ago=function(t,e){var a,s=Math.round,l=" ago",i=function(t,a){return void 0===e?a+" "+t+(a>1?"s":"")+l:a+t.substring(0,1)},r=Date.now()-new Date(t).getTime();r<0&&(r*=-1,l=" from now");for(var n in o){if(s(r)<o[n])return i(a||"m",s(r/(o[a]||1)));a=n}return i(n,s(r/o[n]))},obj.today=function(){var t=new Date,e=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"),a=new Array("January","February","March","April","May","June","July","August","September","October","November","December");return e[t.getDay()]+", "+a[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()},obj.timefriendly=function(s){var t=s.match(/(\d).([a-z]*?)s?$/);return t[1]*eval(o[t[2]])},obj.mintoread=function(t,e,a){var s=Math.round(t.split(" ").length/(a||200));return(s||"< 1")+(e||" min to read")},obj};"undefined"!=typeof module&&module.exports&&(module.exports=timeago())},function(t,e,a){function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function l(t,e,a){if(t&&d(t)&&t instanceof s)return t;var l=new s;return l.parse(t,e,a),l}function i(t){return n(t)&&(t=l(t)),t instanceof s?t.format():s.prototype.format.call(t)}function r(t,e){return l(t,!1,!0).resolve(e)}function o(t,e){return t?l(t,!1,!0).resolveObject(e):e}function n(t){return"string"==typeof t}function d(t){return"object"==typeof t&&null!==t}function c(t){return null===t}function u(t){return null==t}var h=a(8);e.parse=l,e.resolve=r,e.resolveObject=o,e.format=i,e.Url=s;var m=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,p=["<",">",'"',"`"," ","\r","\n","\t"],g=["{","}","|","\\","^","`"].concat(p),v=["'"].concat(g),N=["%","/","?",";","#"].concat(v),y=["/","?","#"],b=255,S=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},O={javascript:!0,"javascript:":!0},J={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=a(10);s.prototype.parse=function(t,e,a){if(!n(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t;s=s.trim();var l=m.exec(s);if(l){l=l[0];var i=l.toLowerCase();this.protocol=i,s=s.substr(l.length)}if(a||l||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var r="//"===s.substr(0,2);!r||l&&O[l]||(s=s.substr(2),this.slashes=!0)}if(!O[l]&&(r||l&&!J[l])){for(var o=-1,d=0;d<y.length;d++){var c=s.indexOf(y[d]);c!==-1&&(o===-1||c<o)&&(o=c)}var u,f;f=o===-1?s.lastIndexOf("@"):s.lastIndexOf("@",o),f!==-1&&(u=s.slice(0,f),s=s.slice(f+1),this.auth=decodeURIComponent(u)),o=-1;for(var d=0;d<N.length;d++){var c=s.indexOf(N[d]);c!==-1&&(o===-1||c<o)&&(o=c)}o===-1&&(o=s.length),this.host=s.slice(0,o),s=s.slice(o),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var g=this.hostname.split(/\./),d=0,k=g.length;d<k;d++){var x=g[d];if(x&&!x.match(S)){for(var w="",L=0,D=x.length;L<D;L++)w+=x.charCodeAt(L)>127?"x":x[L];if(!w.match(S)){var R=g.slice(0,d),j=g.slice(d+1),F=x.match(_);F&&(R.push(F[1]),j.unshift(F[2])),j.length&&(s="/"+j.join(".")+s),this.hostname=R.join(".");break}}}if(this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var T=this.hostname.split("."),U=[],d=0;d<T.length;++d){var P=T[d];U.push(P.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(P):P)}this.hostname=U.join(".")}var A=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+A,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!E[i])for(var d=0,k=v.length;d<k;d++){var M=v[d],H=encodeURIComponent(M);H===M&&(H=escape(M)),s=s.split(M).join(H)}var W=s.indexOf("#");W!==-1&&(this.hash=s.substr(W),s=s.slice(0,W));var B=s.indexOf("?");if(B!==-1?(this.search=s.substr(B),this.query=s.substr(B+1),e&&(this.query=C.parse(this.query)),s=s.slice(0,B)):e&&(this.search="",this.query={}),s&&(this.pathname=s),J[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var A=this.pathname||"",P=this.search||"";this.path=A+P}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",a=this.pathname||"",s=this.hash||"",l=!1,i="";this.host?l=t+this.host:this.hostname&&(l=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(l+=":"+this.port)),this.query&&d(this.query)&&Object.keys(this.query).length&&(i=C.stringify(this.query));var r=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||J[e])&&l!==!1?(l="//"+(l||""),a&&"/"!==a.charAt(0)&&(a="/"+a)):l||(l=""),s&&"#"!==s.charAt(0)&&(s="#"+s),r&&"?"!==r.charAt(0)&&(r="?"+r),a=a.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),r=r.replace("#","%23"),e+l+a+r+s},s.prototype.resolve=function(t){return this.resolveObject(l(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(n(t)){var e=new s;e.parse(t,!1,!0),t=e}var a=new s;if(Object.keys(this).forEach(function(t){a[t]=this[t]},this),a.hash=t.hash,""===t.href)return a.href=a.format(),a;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(a[e]=t[e])}),J[a.protocol]&&a.hostname&&!a.pathname&&(a.path=a.pathname="/"),a.href=a.format(),a;if(t.protocol&&t.protocol!==a.protocol){if(!J[t.protocol])return Object.keys(t).forEach(function(e){a[e]=t[e]}),a.href=a.format(),a;if(a.protocol=t.protocol,t.host||O[t.protocol])a.pathname=t.pathname;else{for(var l=(t.pathname||"").split("/");l.length&&!(t.host=l.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==l[0]&&l.unshift(""),l.length<2&&l.unshift(""),a.pathname=l.join("/")}if(a.search=t.search,a.query=t.query,a.host=t.host||"",a.auth=t.auth,a.hostname=t.hostname||t.host,a.port=t.port,a.pathname||a.search){var i=a.pathname||"",r=a.search||"";a.path=i+r}return a.slashes=a.slashes||t.slashes,a.href=a.format(),a}var o=a.pathname&&"/"===a.pathname.charAt(0),d=t.host||t.pathname&&"/"===t.pathname.charAt(0),h=d||o||a.host&&t.pathname,m=h,f=a.pathname&&a.pathname.split("/")||[],l=t.pathname&&t.pathname.split("/")||[],p=a.protocol&&!J[a.protocol];if(p&&(a.hostname="",a.port=null,a.host&&(""===f[0]?f[0]=a.host:f.unshift(a.host)),a.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===l[0]?l[0]=t.host:l.unshift(t.host)),t.host=null),h=h&&(""===l[0]||""===f[0])),d)a.host=t.host||""===t.host?t.host:a.host,a.hostname=t.hostname||""===t.hostname?t.hostname:a.hostname,a.search=t.search,a.query=t.query,f=l;else if(l.length)f||(f=[]),f.pop(),f=f.concat(l),a.search=t.search,a.query=t.query;else if(!u(t.search)){if(p){a.hostname=a.host=f.shift();var g=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@");g&&(a.auth=g.shift(),a.host=a.hostname=g.shift())}return a.search=t.search,a.query=t.query,c(a.pathname)&&c(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.href=a.format(),a}if(!f.length)return a.pathname=null,a.search?a.path="/"+a.search:a.path=null,a.href=a.format(),a;for(var v=f.slice(-1)[0],N=(a.host||t.host)&&("."===v||".."===v)||""===v,y=0,b=f.length;b>=0;b--)v=f[b],"."==v?f.splice(b,1):".."===v?(f.splice(b,1),y++):y&&(f.splice(b,1),y--);if(!h&&!m)for(;y--;y)f.unshift("..");!h||""===f[0]||f[0]&&"/"===f[0].charAt(0)||f.unshift(""),N&&"/"!==f.join("/").substr(-1)&&f.push("");var S=""===f[0]||f[0]&&"/"===f[0].charAt(0);if(p){a.hostname=a.host=S?"":f.length?f.shift():"";var g=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@");g&&(a.auth=g.shift(),a.host=a.hostname=g.shift())}return h=h||a.host&&f.length,h&&!S&&f.unshift(""),f.length?a.pathname=f.join("/"):(a.pathname=null,a.path=null),c(a.pathname)&&c(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.auth=t.auth||a.auth,a.slashes=a.slashes||t.slashes,a.href=a.format(),a},s.prototype.parseHost=function(){var t=this.host,e=f.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,a){var s;(function(t,l){!function(i){function r(t){throw RangeError(R[t])}function o(t,e){for(var a=t.length,s=[];a--;)s[a]=e(t[a]);return s}function n(t,e){var a=t.split("@"),s="";a.length>1&&(s=a[0]+"@",t=a[1]),t=t.replace(D,".");var l=t.split("."),i=o(l,e).join(".");return s+i}function d(t){for(var e,a,s=[],l=0,i=t.length;l<i;)e=t.charCodeAt(l++),e>=55296&&e<=56319&&l<i?(a=t.charCodeAt(l++),56320==(64512&a)?s.push(((1023&e)<<10)+(1023&a)+65536):(s.push(e),l--)):s.push(e);return s}function c(t){return o(t,function(t){var e="";return t>65535&&(t-=65536,e+=T(t>>>10&1023|55296),t=56320|1023&t),e+=T(t)}).join("")}function u(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:S}function h(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function m(t,e,a){var s=0;for(t=a?F(t/J):t>>1,t+=F(t/e);t>j*E>>1;s+=S)t=F(t/j);return F(s+(j+1)*t/(t+O))}function f(t){var e,a,s,l,i,o,n,d,h,f,p=[],g=t.length,v=0,N=k,y=C;for(a=t.lastIndexOf(x),a<0&&(a=0),s=0;s<a;++s)t.charCodeAt(s)>=128&&r("not-basic"),p.push(t.charCodeAt(s));for(l=a>0?a+1:0;l<g;){for(i=v,o=1,n=S;l>=g&&r("invalid-input"),d=u(t.charCodeAt(l++)),(d>=S||d>F((b-v)/o))&&r("overflow"),v+=d*o,h=n<=y?_:n>=y+E?E:n-y,!(d<h);n+=S)f=S-h,o>F(b/f)&&r("overflow"),o*=f;e=p.length+1,y=m(v-i,e,0==i),F(v/e)>b-N&&r("overflow"),N+=F(v/e),v%=e,p.splice(v++,0,N)}return c(p)}function p(t){var e,a,s,l,i,o,n,c,u,f,p,g,v,N,y,O=[];for(t=d(t),g=t.length,e=k,a=0,i=C,o=0;o<g;++o)p=t[o],p<128&&O.push(T(p));for(s=l=O.length,l&&O.push(x);s<g;){for(n=b,o=0;o<g;++o)p=t[o],p>=e&&p<n&&(n=p);for(v=s+1,n-e>F((b-a)/v)&&r("overflow"),a+=(n-e)*v,e=n,o=0;o<g;++o)if(p=t[o],p<e&&++a>b&&r("overflow"),p==e){for(c=a,u=S;f=u<=i?_:u>=i+E?E:u-i,!(c<f);u+=S)y=c-f,N=S-f,O.push(T(h(f+y%N,0))),c=F(y/N);O.push(T(h(c,0))),i=m(a,v,s==l),a=0,++s}++a,++e}return O.join("")}function g(t){return n(t,function(t){return w.test(t)?f(t.slice(4).toLowerCase()):t})}function v(t){return n(t,function(t){return L.test(t)?"xn--"+p(t):t})}var N=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof l&&l);N.global!==N&&N.window!==N&&N.self!==N||(i=N);var y,b=2147483647,S=36,_=1,E=26,O=38,J=700,C=72,k=128,x="-",w=/^xn--/,L=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=S-_,F=Math.floor,T=String.fromCharCode;y={version:"1.3.2",ucs2:{decode:d,encode:c},decode:f,encode:p,toASCII:v,toUnicode:g},s=function(){return y}.call(e,a,e,t),!(void 0!==s&&(t.exports=s))}(this)}).call(e,a(9)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,a){"use strict";e.decode=e.parse=a(11),e.encode=e.stringify=a(12)},function(t,e){"use strict";function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,s,l){e=e||"&",s=s||"=";var i={};if("string"!=typeof t||0===t.length)return i;var r=/\+/g;t=t.split(e);var o=1e3;l&&"number"==typeof l.maxKeys&&(o=l.maxKeys);var n=t.length;o>0&&n>o&&(n=o);for(var d=0;d<n;++d){var c,u,h,m,f=t[d].replace(r,"%20"),p=f.indexOf(s);p>=0?(c=f.substr(0,p),u=f.substr(p+1)):(c=f,u=""),h=decodeURIComponent(c),m=decodeURIComponent(u),a(i,h)?Array.isArray(i[h])?i[h].push(m):i[h]=[i[h],m]:i[h]=m}return i}},function(t,e){"use strict";var a=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,s,l){return e=e||"&",s=s||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(l){var i=encodeURIComponent(a(l))+s;return Array.isArray(t[l])?t[l].map(function(t){return i+encodeURIComponent(a(t))}).join(e):i+encodeURIComponent(a(t[l]))}).join(e):l?encodeURIComponent(a(l))+s+encodeURIComponent(a(t)):""}},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}var l=a(2),i=s(l),r=a(3),o=s(r),n=a(14),d=s(n);ProtoGraph.Card.toStory.prototype.getData=function(t){return this.containerInstance.exportData()},ProtoGraph.Card.toStory.prototype.renderSEO=function(t){return this.renderMode="SEO",this.containerInstance.renderSEO()},ProtoGraph.Card.toStory.prototype.renderEdit=function(t){var e=this;this.mode="edit",this.onPublishCallback=t,o.default.render(i.default.createElement(d.default,{dataURL:this.options.data_url,schemaURL:this.options.schema_url,uiSchemaURL:this.options.ui_schema_url,domain:this.options.domain,optionalConfigURL:this.options.configuration_url,optionalConfigSchemaURL:this.options.configuration_schema_url,siteConfigURL:this.options.site_config_url,onPublishCallback:this.onPublishCallback,houseColors:this.options.houseColors,mode:this.mode,ref:function(t){e.containerInstance=e.containerInstance||t}}),this.options.selector)}},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),n=a(2),d=s(n),c=(a(3),a(5)),u=a(4),h=s(u),m=a(15),f=s(m),p=function(t){function e(t){l(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.state={step:1,dataJSON:{card_data:{},configs:{}},mode:"col16",loading:!0,publishing:!1,uiSchemaJSON:{},schemaJSON:void 0,optionalConfigJSON:{},optionalConfigSchemaJSON:void 0,refLinkDetails:void 0},a.refLinkSourcesURL=window.ref_link_sources_url,a.toggleMode=a.toggleMode.bind(a),a}return r(e,t),o(e,[{key:"exportData",value:function(){var t=this.state.dataJSON,e={step:this.state.step,dataJSON:t.card_data,schemaJSON:this.state.schemaJSON,uiSchemaJSON:this.state.uiSchemaJSON,optionalConfigJSON:this.state.dataJSON.configs,optionalConfigSchemaJSON:this.state.optionalConfigSchemaJSON};return e.name=e.dataJSON.data.headline.substr(0,225),e}},{key:"componentDidMount",value:function(){var t=this;"string"==typeof this.props.dataURL&&(0,c.all)([(0,c.get)(this.props.dataURL),(0,c.get)(this.props.schemaURL),(0,
c.get)(this.props.optionalConfigURL),(0,c.get)(this.props.optionalConfigSchemaURL),(0,c.get)(this.refLinkSourcesURL),(0,c.get)(this.props.uiSchemaURL),(0,c.get)(this.props.siteConfigURL)]).then((0,c.spread)(function(e,a,s,l,i,r,o){var n=e.data,d=void 0,c=n.data.url,u=c&&c.split("/"),h=void 0,m=u&&u[2],f=void 0;if(i.data.forEach(function(t){var e=t.url&&t.url.split("/"),a=e&&e[2];a===m&&(d=t.favicon_url,h=t.name)}),n.data.faviconurl=d,n.data.domainurl=m,n.data.publishername=h,n.data.publishedat=(new Date).toISOString(),window.intersection_names&&window.intersection_names.length){a.data.properties.data.properties.genre.enum=window.intersection_names;var p=JSON.parse(JSON.stringify(window.intersection_names));p[0]="Blank",a.data.properties.data.properties.genre.enumNames=p}if(window.subintersection_names&&window.subintersection_names.length){a.data.properties.data.properties.subgenre.enum=window.subintersection_names;var g=JSON.parse(JSON.stringify(window.subintersection_names));g[0]="Blank",a.data.properties.data.properties.subgenre.enumNames=g}f={dataJSON:{card_data:n,configs:s.data},schemaJSON:a.data,uiSchemaJSON:r.data,optionalConfigJSON:s.data,optionalConfigSchemaJSON:l.data,refLinkDetails:i.data,siteConfigs:o.data},f.optionalConfigJSON.house_colour=f.siteConfigs.house_colour,f.optionalConfigJSON.reverse_house_colour=f.siteConfigs.reverse_house_colour,f.optionalConfigJSON.font_colour=f.siteConfigs.font_colour,f.optionalConfigJSON.reverse_font_colour=f.siteConfigs.reverse_font_colour,f.optionalConfigJSON.story_card_flip=f.siteConfigs.story_card_flip,f.dataJSON.card_data.data.language=f.siteConfigs.primary_language.toLowerCase(),t.setState(f)})).catch(function(e){console.error(e),t.setState({errorOnFetchingData:!0})})}},{key:"onChangeHandler",value:function(t){var e=this,a=t.formData;switch(this.state.step){case 1:this.setState(function(t,s){var l=t.dataJSON,i=void 0,r=a.data.url,o=r&&r.split("/"),n=void 0,d=o&&o[2];return e.state.refLinkDetails.forEach(function(t){var e=t.url&&t.url.split("/"),a=e&&e[2];a===d&&(i=t.favicon_url,n=t.name)}),a.data.faviconurl=i,a.data.domainurl=d,a.data.publishername=n,a.data.interactive=!!(a.data.hasimage||a.data.hasvideo||a.data.hasdata),l.card_data=a,{dataJSON:l}})}}},{key:"onSubmitHandler",value:function(t){var e=this;t.formData;switch(this.state.step){case 1:if("function"==typeof this.props.onPublishCallback){this.setState({publishing:!0});var a=this.props.onPublishCallback();a.then(function(t){e.setState({publishing:!1})})}}}},{key:"renderSEO",value:function(){var t=this.state.dataJSON.card_data.data,e=void 0;return e="<blockquote><a href="+t.url+' rel="nofollow">'+(t.headline?"<h2>"+t.headline+"</h2>":"")+"</a>"+(t.byline?"<p>"+t.byline+"</p>":"")+(t.publishedat?"<p>"+t.publishedat+"</p>":"")+(t.series?"<p>"+t.series+"</p>":"")+(t.genre?"<p>"+t.genre+"</p>":"")+(t.subgenre?"<p>"+t.subgenre+"</p>":"")+(t.summary?"<p>"+t.summary+"</p>":"")+"</blockquote>"}},{key:"renderSchemaJSON",value:function(){switch(this.state.step){case 1:return this.state.schemaJSON;case 2:return this.state.optionalConfigSchemaJSON}}},{key:"renderFormData",value:function(){switch(this.state.step){case 1:return this.state.dataJSON.card_data;case 2:return this.state.dataJSON.configs}}},{key:"showLinkText",value:function(){switch(this.state.step){case 1:return"";case 2:return"< Back"}}},{key:"showButtonText",value:function(){switch(this.state.step){case 1:return"Publish"}}},{key:"onPrevHandler",value:function(){var t=--this.state.step;this.setState({step:t})}},{key:"toggleMode",value:function(t){var e=this,a=t.target.closest("a"),s=a.getAttribute("data-mode");this.setState(function(t,e){return{mode:"blank"}},function(){e.setState(function(t,e){var a=void 0;return a=s!==t.mode?s:t.mode,{mode:a}})})}},{key:"render",value:function(){var t=this;return void 0===this.state.schemaJSON?d.default.createElement("div",null,"Loading"):d.default.createElement("div",{className:"proto-container"},d.default.createElement("div",{className:"ui grid form-layout"},d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"four wide column proto-card-form protograph-scroll-form"},d.default.createElement("div",null,d.default.createElement("div",{className:"section-title-text"},"Fill the form"),d.default.createElement("div",{className:"ui label proto-pull-right"},"toStory")),d.default.createElement(f.default,{uiSchema:this.state.uiSchemaJSON,schema:this.renderSchemaJSON(),onSubmit:function(e){return t.onSubmitHandler(e)},onChange:function(e){return t.onChangeHandler(e)},formData:this.renderFormData()},d.default.createElement("a",{id:"protograph-prev-link",className:""+(this.state.publishing?"protograph-disable":""),onClick:function(e){return t.onPrevHandler(e)}},this.showLinkText()," "),d.default.createElement("button",{type:"submit",className:(this.state.publishing?"ui primary loading disabled button":"")+" default-button protograph-primary-button"},this.showButtonText()))),d.default.createElement("div",{className:"twelve wide column proto-card-preview proto-share-card-div"},d.default.createElement("div",{className:"protograph-menu-container"},d.default.createElement("div",{className:"ui compact menu"},d.default.createElement("a",{className:"item "+("col16"===this.state.mode?"active":""),"data-mode":"col16",onClick:this.toggleMode},"16c-cover"),d.default.createElement("a",{className:"item "+("col7"===this.state.mode?"active":""),"data-mode":"col7",onClick:this.toggleMode},"7c"),d.default.createElement("a",{className:"item "+("col4"===this.state.mode?"active":""),"data-mode":"col4",onClick:this.toggleMode},"4c"),d.default.createElement("a",{className:"item "+("col3"===this.state.mode?"active":""),"data-mode":"col3",onClick:this.toggleMode},"3c"),d.default.createElement("a",{className:"item "+("col2"===this.state.mode?"active":""),"data-mode":"col2",onClick:this.toggleMode},"2c"))),"blank"==this.state.mode?d.default.createElement("div",null):d.default.createElement("div",{className:"protograph-app-holder"},d.default.createElement(h.default,{mode:this.state.mode,dataJSON:this.state.dataJSON,domain:this.props.domain,optionalConfigJSON:this.state.optionalConfigJSON,linkDetails:this.state.refLinkDetails}))))))}}]),e}(d.default.Component);e.default=p},function(t,e){t.exports=JSONSchemaForm}]);